import{r as o,u as M,a as S,j as s,B as u}from"./index-LgrLutx-.js";import{F as k,G as $,P as w}from"./pagesStyles-CVdOknZo.js";const R=()=>{const[P,v]=o.useState([]),[l,p]=o.useState(1),[h,f]=o.useState(0),[m,x]=M(),{category:a,query:r,setCategory:C,setQuery:j}=S(e=>({category:e.category,query:e.query,setCategory:e.setCategory,setQuery:e.setQuery})),d=o.useCallback(async(e,y,g)=>{console.log(`Fetching movies for category: ${y}, page: ${e}, query: "${g}"`);const c=new k;let t;try{switch(y){case"search":g&&(t=await c.getSearch(g,e));break;case"top_rated":t=await c.getTopRated(e);break;case"upcoming":t=await c.getUpcoming(e);break;case"popular":default:t=await c.getTrending(e);break}if(t&&t.results){const n=Math.min(t.total_pages,500);v(t.results),f(n),console.log(`Movies fetched: ${t.results.length} movies, totalPages: ${n}`)}}catch(n){console.error("Error fetching movies:",n)}},[]);o.useEffect(()=>{d(l,a,r)},[l,a,r,d]);const b=e=>{console.log(`Page change: new page=${e}`),p(e)},i=e=>{p(1),e!=="search"&&(j(""),m.delete("query"),x(m)),C(e),console.log(`Category change: new category=${e}`)};return s.jsxs(s.Fragment,{children:[s.jsx("h2",{className:"pageHeaderStyle",children:a==="search"&&r?`Search Results for "${r}"`:a==="popular"?"Popular Movies":a==="top_rated"?"Top Rated Movies":a==="upcoming"?"Upcoming Movies":""}),s.jsxs("div",{className:"buttonGroup",children:[s.jsx(u,{onClick:()=>i("popular"),className:a==="popular"?"activeButton":"",label:"Popular Movies"}),s.jsx(u,{onClick:()=>i("top_rated"),className:a==="top_rated"?"activeButton":"",label:"Top Rated"}),s.jsx(u,{onClick:()=>i("upcoming"),className:a==="upcoming"?"activeButton":"",label:"Upcoming"})]}),s.jsx($,{movies:P}),h>1&&s.jsx(w,{currentPage:l,totalPages:h,onPageChange:b})]})};export{R as default};
