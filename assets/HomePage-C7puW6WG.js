import{r as o,u as S,a as k,j as t,B as g}from"./index-g3vj8XI7.js";import{F as $,G as w,P as B}from"./pagesStyles-DIlVgMSt.js";const T=()=>{const[P,v]=o.useState([]),[l,p]=o.useState(1),[h,f]=o.useState(0),[m,x]=S(),{category:a,query:r,setCategory:C,setQuery:j,adults:b}=k(e=>({category:e.category,query:e.query,setCategory:e.setCategory,setQuery:e.setQuery,adults:e.adults})),d=o.useCallback(async(e,y,u)=>{console.log(`Fetching movies for category: ${y}, page: ${e}, query: "${u}"`);const c=new $;let s;try{switch(y){case"search":u&&(s=await c.getSearch(u,e));break;case"top_rated":s=await c.getTopRated(e);break;case"upcoming":s=await c.getUpcoming(e);break;case"popular":default:s=await c.getTrending(e);break}if(s&&s.results){const n=Math.min(s.total_pages,500);v(s.results),f(n),console.log(`Movies fetched: ${s.results.length} movies, totalPages: ${n}`)}}catch(n){console.error("Error fetching movies:",n)}},[]);o.useEffect(()=>{d(l,a,r)},[l,a,r,d,b]);const M=e=>{console.log(`Page change: new page=${e}`),p(e)},i=e=>{p(1),e!=="search"&&(j(""),m.delete("query"),x(m)),C(e),console.log(`Category change: new category=${e}`)};return t.jsxs(t.Fragment,{children:[t.jsx("h2",{className:"pageHeaderStyle",children:a==="search"&&r?`Search Results for "${r}"`:a==="popular"?"Popular Movies":a==="top_rated"?"Top Rated Movies":a==="upcoming"?"Upcoming Movies":""}),t.jsxs("div",{className:"buttonGroup",children:[t.jsx(g,{onClick:()=>i("popular"),className:a==="popular"?"activeButton":"",label:"Popular Movies"}),t.jsx(g,{onClick:()=>i("top_rated"),className:a==="top_rated"?"activeButton":"",label:"Top Rated"}),t.jsx(g,{onClick:()=>i("upcoming"),className:a==="upcoming"?"activeButton":"",label:"Upcoming"})]}),t.jsx(w,{movies:P}),h>1&&t.jsx(B,{currentPage:l,totalPages:h,onPageChange:M})]})};export{T as default};
