import{r as o,u as b,j as t,B as g}from"./index-ky2uII_Z.js";import{F as k,G as M,P as S}from"./pagesStyles-BuWCvCXG.js";const E=()=>{const[y,f]=o.useState([]),[p,v]=o.useState(1),{category:a,query:r,setCategory:x,setQuery:P,adults:j}=b(e=>({category:e.category,query:e.query,setCategory:e.setCategory,setQuery:e.setQuery,adults:e.adults})),[c,m]=o.useState({page:1,category:a,query:r}),h=o.useCallback(async(e,l,d)=>{const n=new k;let s;try{switch(l){case"search":d&&(s=await n.getSearch(d,e));break;case"top_rated":s=await n.getTopRated(e);break;case"upcoming":s=await n.getUpcoming(e);break;case"popular":default:s=await n.getTrending(e);break}if(s&&s.results){const u=Math.min(s.total_pages,500);f(s.results),v(u)}}catch(u){console.error("Error fetching movies:",u)}},[]);o.useEffect(()=>{h(c.page,c.category,c.query)},[c,h]),o.useEffect(()=>{m({page:1,category:a,query:r})},[a,r,j]);const C=e=>{m(l=>({...l,page:e}))},i=e=>{e!=="search"&&P(""),x(e)};return t.jsxs(t.Fragment,{children:[t.jsx("h2",{className:"pageHeaderStyle",children:a==="search"&&r?`Search Results for "${r}"`:a==="popular"?"Popular Movies":a==="top_rated"?"Top Rated Movies":a==="upcoming"?"Upcoming Movies":""}),t.jsxs("div",{className:"buttonGroup",children:[t.jsx(g,{onClick:()=>i("popular"),className:a==="popular"?"activeButton":"",label:"Popular Movies"}),t.jsx(g,{onClick:()=>i("top_rated"),className:a==="top_rated"?"activeButton":"",label:"Top Rated"}),t.jsx(g,{onClick:()=>i("upcoming"),className:a==="upcoming"?"activeButton":"",label:"Upcoming"})]}),t.jsx(M,{movies:y}),p>1&&t.jsx(S,{currentPage:c.page,totalPages:p,onPageChange:C})]})};export{E as default};
