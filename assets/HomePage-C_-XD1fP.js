import{r as s,u as x,F as j,j as r}from"./index-Bwo9tAWB.js";import{G as M,P as y}from"./pagesStyles-FlpyXHMO.js";const R=()=>{const[S,f]=s.useState([]),[n,l]=s.useState(null),[d,o]=s.useState(1),[u,i]=s.useState(0),[g,p]=x(),t=g.get("query"),h=g.get("page")||"1",P=s.useCallback(async(e,c)=>{const m=new j,a=c?await m.getSearch(c,e):await m.getTrending(e);a&&a.results&&(c?(l(a.results),i(a.total_pages)):(f(a.results.slice(0,20)),i(Math.ceil(a.total_pages/2)),l(null)))},[]);s.useEffect(()=>{const e=parseInt(h,10);o(e),P(e,t||void 0)},[h,t,P]);const v=e=>{o(e),p({query:t||"",page:e.toString()})};return s.useEffect(()=>{p({query:t||"",page:"1"}),o(1)},[t]),r.jsxs("div",{children:[r.jsx("h2",{className:"pageHeaderStyle",children:n?"Search Results":"Popular Movies"}),r.jsx(M,{movies:n||S}),u>1&&r.jsx(y,{currentPage:d,totalPages:u,onPageChange:v})]})};export{R as default};
